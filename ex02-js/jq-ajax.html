<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- jQuery -->
    <script src="script/jquery-3.7.1.js"></script>
    <script>
        //  페이지 초기화
        $(document).ready(event => {
            //  #btnCallSnippet에 click 이벤트
            $("#btnCallSnippet").on("click", event => {
                //  Ajax로 snippet.html 호출
                //  option을 JavaScript 객체로 전달
                $.ajax({
                    url: "snippet.html",    //  호출할 URL
                    type: "GET",    //  요청의 타입
                    // data:        //  서버로 전송할 데이터
                    dataType: "text",  //  응답의 데이터 타입
                    success: function(response) {   //  성공 콜백
                        //  response -> 응답정보
                        console.log(response);
                        $("#info").html(response);
                    },
                    error: function(request, status, error) {
                        //  request: 요청 정보
                        //  status: 상태 정보
                        //  error: 에러의 상세 정보
                        console.error(error);
                    }
                }); 
            });

            //  #btnCallMovies에 클릭 이벤트
            $("#btnCallMovies").on("click", event => {
                //  localhost:3000/movies -> json
                $.ajax({
                    url: "http://localhost:3000/movies",
                    type: "GET",
                    dataType: "json",
                    success: function(response) {
                        console.log(response);  //  JSON

                        //  영화 목록 정보
                        const movies = response.movies;
                        console.log(movies);    //  Array
                    },
                    error: function(request, status, error) {
                        console.error(error);
                    }
                });
            });
        });
    </script>
</head>
<body>
    <button id="btnCallSnippet">HTML 조각 불러오기</button>
    <button id="btnCallMovies">영화 목록 불러오기</button>

    <!-- HTML 조각 불러와서 렌더링할 영역 -->
    <div id="info">

    </div>

    <!-- JSON을 받아와서 동적으로 만들 테이블 -->
    <table id="list" border="1" width="640">

    </table>
</body>
</html>